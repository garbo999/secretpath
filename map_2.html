<!DOCTYPE html>
<html>
<head>
  <style>
    #googleMap {
      width:100vw;
      height:100vh;}

    .gm-style img {
      -webkit-filter: grayscale(100%);
      -moz-filter: grayscale(100%);
      -ms-filter: grayscale(100%);
      -o-filter: grayscale(100%);
      filter: grayscale(100%);
      filter: url(grayscale.svg); /* Firefox 4+ */
      filter: gray; /* IE 6-9 */}
  </style>

<script
src="http://maps.googleapis.com/maps/api/js">
</script>

<script>
var my_lat, my_long;
var dest_lat_1, dest_long_1;

/*var w = Math.max(document.documentElement.clientWidth, window.innerWidth || 0)
var h = Math.max(document.documentElement.clientHeight, window.innerHeight || 0)
*/
/*console.log(w + "," + h);
*/
var options = {
  enableHighAccuracy: false,
  timeout: 1000,
  maximumAge: 0
};

function getLocation() {
  if (navigator.geolocation) {
      navigator.geolocation.watchPosition(initialize, errorCallback, options);
  } else {
      x.innerHTML = "Geolocation is not supported by this browser.";
  }
}

function errorCallback(error) {
    switch(error.code) {
        case error.PERMISSION_DENIED:
            x.innerHTML = "User denied the request for Geolocation."
            break;
        case error.POSITION_UNAVAILABLE:
            x.innerHTML = "Location information is unavailable."
            break;
        case error.TIMEOUT:
            x.innerHTML = "The request to get user location timed out."
            break;
        case error.UNKNOWN_ERROR:
            x.innerHTML = "An unknown error occurred."
            break;
    }
}

function initialize(position) {
  var x = document.getElementById("demo");

  x.innerHTML = "Latitude: " + position.coords.latitude + "<br>Longitude: " + position.coords.longitude;  

  my_lat = position.coords.latitude;
  my_long = position.coords.longitude;
/*
  dest_lat_1 = my_lat * .9999;
  dest_long_1 = my_long * .9999;*/

  dest_lat_2 = 58.38432; // Vallikaar
  dest_long_2 = 24.49296;

  var myCenter=new google.maps.LatLng(my_lat, my_long);
/*  var myPos1=new google.maps.LatLng(dest_lat_1, dest_long_1);
*/  var myPos2=new google.maps.LatLng(dest_lat_2, dest_long_2);

  // ddkdkdkd

  var mapProp = {
    center:myCenter,
    zoom:15,
    mapTypeId:google.maps.MapTypeId.ROADMAP,
    zoomControl: false
  };

  var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);
  map.setOptions({draggable: false, zoomControl: false, scrollwheel: false, disableDoubleClickZoom: true});
  // need to combine setOptions with mapProp

  var marker=new google.maps.Marker({
    position:myCenter,
    icon:'pinkball.png'
    //icon:'safe_image.png'
  });
/*  var marker1=new google.maps.Marker({
    position:myPos1,
  });
*/  var marker2=new google.maps.Marker({
    position:myPos2,
  });

  marker.setMap(map);
  //marker1.setMap(map);
  marker2.setMap(map);

  console.log("getBounds"+map.getBounds);


  var bounds = new google.maps.LatLngBounds();
  bounds.extend(myCenter);
  bounds.extend(myPos2);
  map.fitBounds(bounds);

}

google.maps.event.addDomListener(window, 'load', getLocation);
</script>
</head>

<body>
  <p id="demo"></p>
  <div id="googleMap"></div>
</body>
</html>
